# Little Shop
Проект представляет собой внутренний магазин виртуальных товаров, в котором пользователи могут обмениваться монетами и приобретать товары.

## Функциональность
* Аутентификация и получение JWT-токена.
* Получение информации о количестве монет, инвентаре и истории транзакций.
* Передача монет другому пользователю.
* Покупка товаров за монеты.

## API
### 1. **Аутентификация**
**POST** `/api/auth`  
_Описание_: Аутентификация и получение JWT-токена.  

**Тело запроса**:
```json
{
  "username": "string",
  "password": "string"
}
```
**Ответ**:
```json
{
  "token": "string"
}
```

### 2. **Получение информации о пользователе**
**GET** `/api/info`  
_Описание_: Получить информацию о монетах, инвентаре и истории транзакций.  

**Ответ**:
```json
{
  "coins": 1000,
  "inventory": [
    {
      "type": "t-shirt",
      "quantity": 1
    }
  ],
  "coinHistory": {
    "received": [
      {
        "fromUser": "Alice",
        "amount": 50
      }
    ],
    "sent": [
      {
        "toUser": "Bob",
        "amount": 30
      }
    ]
  }
}
```

### 3. **Передача монет другому пользователю**
**POST** `/api/sendCoin`  
_Описание_: Отправить монеты другому пользователю.  

**Тело запроса**:
```json
{
  "toUser": "Bob",
  "amount": 50
}
```

### 4. **Покупка товара**
**GET** `/api/buy/{item}`  
_Описание_: Купить предмет за монеты.  

**Параметры запроса**:
* `item` _(string)_: название товара

## Запуск
Приложение запускается в Docker. Используйте команду:
```sh
make prod
```
Сервер будет доступен по адресу [http://localhost:8080](http://localhost:8080).

## Запуск тестов
Для запуска тестов используйте:
```sh
make test
```
Будут выполнены юнит и E2E тесты в тестовом окружении.

## Нагрузочное тестирование
Для проведения нагрузочного тестирования:
1. Запустите сервер на `http://localhost:8080/`
2. Перейдите в директорию `tests/load_test`
3. Выполните команду:
```sh
k6 run k6_load_test.js
```
Тест выполняется 30 виртуальными пользователями, создавая нагрузку ~2000 RPS при нулевой ошибке и средней задержке 15 мс.